<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <style>

        #lineScore td, #lineScore th, #gameLog th {
            text-align: center;
        }

        .boxscore td:not(.playerName), .boxscore th {
            text-align: center;
        }

        .boxscore th, #lineScore th, #mainTitle, #gameLog th {
            font-weight: normal;
        }

        #gameLog td {
            vertical-align: middle;
        }

        .logNum {
            text-align: center;
        }

        .dataTables_wrapper .dataTables_scroll {
            border: 1px solid #ccc;
            margin: 0 0;
        }

        div.dataTables_scrollHead table.dataTable {
            margin-bottom: 0 !important;
            margin-top: 0 !important;
            border: 0 !important;
        }

        div.dataTables_scrollHeadInner {
            background-color: #f8f9fa !important;
        }

        .dataTables_scrollBody {
            overflow-x: hidden !important;
            border-top: 1px solid #ccc;
        }

        .table {
            border-left: 0px !important;
            border-right: 0px !important;
        }
        
        .table th {
            border-bottom: 0 !important;
            font-weight: normal;
            text-align: center;
        }

        table.dataTable th {
            border-top: 0 !important;
        }

    </style>

    <title>{{ awayTeam.location }} {{ awayTeam.nickname }} vs. {{ homeTeam.location }} {{ homeTeam.nickname }}</title>

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/r-2.2.2/datatables.min.css" />
</head>
	
	<body>
	<div class="container">
	    <div class="card border-primary mb-3 mt-2">
	    	<div class="card-header text-white bg-primary">
	    		<div class="h2" id="mainTitle">{{ awayTeam.location }} {{ awayTeam.nickname }} at {{ homeTeam.location }} {{ homeTeam.nickname }}</div>
	    	</div>
	    	<div class="card-body">
                <div class="table-responsive">
                    <table id="lineScore" class="table table-bordered">
                        <thead>
                            <tr class="bg-light">
                                <th>TEAM</th>
                                {% for h in header %}
                                <th>{{ h }}</th>
                                {% endfor %}
                                <th>T</th>
                            </tr>
                        </thead>
                        <tr>
                            <td>{{ awayTeam.location }}</td>
                            {% for t in tops %}
                            <td>{{ t }}</td>
                            {% endfor %}
                            <td><strong>{{ game.awayScore }}</strong></td>
                        </tr>
                        <tr>
                            <td>{{ homeTeam.location }}</td>
                            {% for b in bottoms %}
                            <td>{{ b }}</td>
                            {% endfor %}
                            <td><strong>{{ game.homeScore }}</strong></td>
                        </tr>
                    </table>
                </div>
	    	</div>
	    </div>

        <div class="card border-primary">
            <div class="card-header">
                <ul class="nav nav-tabs nav-fill card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link active lead" data-toggle="tab" role="tab" href="#awayBoxScore">
                            {{ awayTeam.location }}
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link lead" data-toggle="tab" role="tab" href="#homeBoxScore">
                            {{ homeTeam.location }}
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link lead" data-toggle="tab" role="tab" href="#gameLogTab">
                            <i class="fa fa-file-text-o" aria-hidden="true"></i> Game Log
                        </a>
                    </li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content" id="gameTabContent">
                    <div class="tab-pane fade show active" id="awayBoxScore" role="tabpanel">
                        <div class="table-responsive">
                            <table id="awayBoxTable" class="table table-bordered boxscore">
                                <thead>
                                    <tr class="bg-light">
                                        <th>BATTER</th>
                                        <th>POS</th>
                                        <th>AB</th>
                                        <th>H</th>
                                        <th>RBI</th>
                                        <th>BB</th>
                                        <th>SO</th>
                                        <th>AVG</th>
                                        <th>OBP</th>
                                        <th>SLG</th>
                                    </tr>
                                </thead>
                                {% for batter in awayTeam.lineup.battingOrder %}
                                <tr>
                                    <td class="playerName">
                                        <a href="https://twitter.com/{{ batter.name }}">{% if batter.sub == True %}*---{% endif %}{{ batter.fullName }}</a>
                                    </td>
                                    <td>{{ batter.position }}</td>
                                    <td>{{ batter.battingGameStats['AB'] }}</td>
                                    <td>{{ batter.battingGameStats['H'] }}</td>
                                    <td>{{ batter.battingGameStats['RBI'] }}</td>
                                    <td>{{ batter.battingGameStats['BB'] }}</td>
                                    <td>{{ batter.battingGameStats['strikeout'] }}</td>
                                    <td>{{ batter.battingGameStats['AVG'] }}</td>
                                    <td>{{ batter.battingGameStats['OBP'] }}</td>
                                    <td>{{ batter.battingGameStats['SLG'] }}</td>
                                </tr>
                                {% endfor %}
                            </table>
                        </div>
                        <p>
                            <span class="boxSubDoubles">
                                <strong>2B:</strong>
                                    {% for batter in awayTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['double'] == 1 %}{{ batter.fullName }}; 
                                        {% elif batter.battingGameStats['double'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['double'] }}); 
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubTriples">
                                <strong>3B:</strong>
                                    {% for batter in awayTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['triple'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['triple'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['triple'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubHomers">
                                <strong>HR:</strong>
                                    {% for batter in awayTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['HR'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['HR'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['HR'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubHBPs">
                                <strong>HBP:</strong>
                                    {% for batter in awayTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['HBP'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['HBP'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['HBP'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                        </p>

                        <div class="table-responsive">
                            <table class="table table-bordered boxscore">
                                <thead>
                                    <tr class="bg-light">
                                        <th>PITCHER</th>
                                        <th>IP</th>
                                        <th>H</th>
                                        <th>R</th>
                                        <th>BB</th>
                                        <th>SO</th>
                                        <th>HR</th>
                                        <th>BF</th>
                                    </tr>
                                </thead>
                                {% for pitcher in awayTeam.lineup.usedPitchers %}
                                {% if pitcher.pitchingGameStats['BF'] > 0 %}
                                <tr>
                                    <td class="playerName">
                                        <a href="https://twitter.com/{{ pitcher.name }}">{{ pitcher.fullName }}</a>
                                    </td>
                                    <td>{{ pitcher.pitchingGameStats['printIP'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['H'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['R'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['BB'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['strikeout'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['HR'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['BF'] }}</td>
                                </tr>{% endif%}
                                {% endfor %}
                            </table>
                        </div></div>

                    <div class="tab-pane fade" id="homeBoxScore" role="tabpanel">
                        <div class="table-responsive">
                            <table class="table table-bordered boxscore">
                                <thead>
                                    <tr class="bg-light">
                                        <th>BATTER</th>
                                        <th>POS</th>
                                        <th>AB</th>
                                        <th>H</th>
                                        <th>RBI</th>
                                        <th>BB</th>
                                        <th>SO</th>
                                        <th>AVG</th>
                                        <th>OBP</th>
                                        <th>SLG</th>
                                    </tr>
                                </thead>
                                {% for batter in homeTeam.lineup.battingOrder %}
                                <tr>
                                    <td class="playerName">
                                        <a href="https://twitter.com/{{ batter.name }}">{% if batter.sub == True %}*---{% endif %}{{ batter.fullName }}</a>
                                    </td>
                                    <td>{{ batter.position }}</td>
                                    <td>{{ batter.battingGameStats['AB'] }}</td>
                                    <td>{{ batter.battingGameStats['H'] }}</td>
                                    <td>{{ batter.battingGameStats['RBI'] }}</td>
                                    <td>{{ batter.battingGameStats['BB'] }}</td>
                                    <td>{{ batter.battingGameStats['strikeout'] }}</td>
                                    <td>{{ batter.battingGameStats['AVG'] }}</td>
                                    <td>{{ batter.battingGameStats['OBP'] }}</td>
                                    <td>{{ batter.battingGameStats['SLG'] }}</td>
                                </tr>
                                {% endfor %}
                            </table>
                        </div>
                        <p>
                            <span class="boxSubDoubles">
                                <strong>2B:</strong> 
                                    {% for batter in homeTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['double'] == 1 %}{{ batter.fullName }}; 
                                        {% elif batter.battingGameStats['double'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['double'] }}); 
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubTriples">
                                <strong>3B:</strong>
                                    {% for batter in homeTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['triple'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['triple'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['triple'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubHomers">
                                <strong>HR:</strong>
                                    {% for batter in homeTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['HR'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['HR'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['HR'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                            <span class="boxSubHBPs">
                                <strong>HBP:</strong>
                                    {% for batter in homeTeam.lineup.battingOrder %}
                                        {% if batter.battingGameStats['HBP'] == 1 %}{{ batter.fullName }};
                                        {% elif batter.battingGameStats['HBP'] > 1 %} {{ batter.fullName }} ({{ batter.battingGameStats['HBP'] }});
                                        {% endif %}
                                    {% endfor %}
                            </span>
                        </p>

                        <div class="table-responsive">
                            <table class="table table-bordered boxscore">
                                <thead>
                                    <tr class="bg-light">
                                        <th>PITCHER</th>
                                        <th>IP</th>
                                        <th>H</th>
                                        <th>R</th>
                                        <th>BB</th>
                                        <th>SO</th>
                                        <th>HR</th>
                                        <th>BF</th>
                                    </tr>
                                </thead>
                                {% for pitcher in homeTeam.lineup.usedPitchers %}
                                {% if pitcher.pitchingGameStats['BF'] > 0 %}
                                <tr>
                                    <td class="playerName">
                                        <a href="https://twitter.com/{{ pitcher.name }}">{{ pitcher.fullName }}</a>
                                    </td>
                                    <td>{{ pitcher.pitchingGameStats['printIP'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['H'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['R'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['BB'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['strikeout'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['HR'] }}</td>
                                    <td>{{ pitcher.pitchingGameStats['BF'] }}</td>
                                </tr>
                                {% endif%}
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="gameLogTab" role="tabpanel">
                        <div class="table-responsive">
                            <table id="gameLog" class="table table-bordered" style="border-collapse:collapse !important;">
                                <thead>
                                    <tr class="bg-light">
                                        <th>INN</th>
                                        <th>AWAY</th>
                                        <th>HOME</th>
                                        <th>PITCHER</th>
                                        <th>BATTER</th>
                                        <th>OUTS</th>
                                        <th>EVENT</th>
                                    </tr>
                                </thead>
                                {% for pa in game.PAs %}
									{% if pa.isSubstitution %}
										<tr class="subLine">
											<td class="logNum">{% if pa.top %}<i class="fa fa-angle-up text-success"></i> {{ pa.inning }}{% else %}<i class="fa fa-angle-down text-danger"></i> {{ pa.inning }}{% endif %}</td>
											<td></td>
											<td></td>
											<td></td>
											<td></td>
											<td class="logNum">{{ pa.outs }}</td>
											<td class="text-danger"><i>{{ pa }}</i></td>
										</tr>
									{% else %}
										<tr>
											<td class="logNum">{% if pa.top %}<i class="fa fa-angle-up text-success"></i> {{ pa.inning }}{% else %}<i class="fa fa-angle-down text-danger"></i> {{ pa.inning }}{% endif %}</td>
											<td class="logNum">{{ pa.awayScore }}</td>
											<td class="logNum">{{ pa.homeScore }}</td>
											<td><a href="https://twitter.com/{{ pa.pitcher.name }}">{{ pa.pitcher.fullName }}</a></td>
											<td><a href="https://twitter.com/{{ pa.batter.name }}">{{ pa.batter.fullName }}</a></td>
											<td class="logNum">{{ pa.baseState.outs }}</td>
											<td>{{ pa }}</td>
										</tr>
									{% endif %}
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
	</div>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/r-2.2.2/datatables.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#gameLog').DataTable({
                scrollY: '50vh',
                scrollCollapse: true,
                paging: false,
                responsive: true,
                dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'>>" +
                    "<'row'<'col-sm-12'tr>>" +
                    "<'row mt-2'<'col-sm-12 col-md-5'><'col-sm-12 col-md-7'f>>",
                columns: [
                    {
                        responsivePriority: 1
                    },
                    {
                        orderable: false,
                    },
                    {
                        orderable: false
                    },
                    {
                        responsivePriority: 5
                    },
                    {
                        responsivePriority: 4
                    },
                    {
                        orderable: false,
                        responsivePriority: 3
                    },
                    {
                        responsivePriority: 2
                    }
                ]
            });

            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                $('#gameLog').DataTable().columns.adjust().draw();
            });

            $('.boxSubDoubles').each(function () {
                console.log($(this).text());
                if ($.trim($(this).text()) == "2B:") {
                    $(this).hide();
                }
            });

            $('.boxSubTriples').each(function () {
                console.log($(this).text());
                if ($.trim($(this).text()) == "3B:") {
                    $(this).hide();
                }
            });

            $('.boxSubHomers').each(function () {
                console.log($(this).text());
                if ($.trim($(this).text()) == "HR:") {
                    $(this).hide();
                }
            });

            $('.boxSubHBPs').each(function () {
                console.log($(this).text());
                if ($.trim($(this).text()) == "HBP:") {
                    $(this).hide();
                }
            });
        });
    </script>
    </body>
</html>